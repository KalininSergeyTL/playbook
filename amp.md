# AMP

Accelerated Mobile Pages (AMP) — технология ускоренных мобильных страниц, позволяет при низкой скорости сети выполнить оперативную загрузку веб-страниц.

Преимущества AMP страниц:
- Поддержка крупнейшими поисковыми системами;
- АМР-страница загружается за 0.7 секунды;
- AMP-страница показывается в карусели фото/записей в поисковой выдаче;
- В поисковой выдаче AMP страница помечена значком молнии, привлекая внимание + такие страницы в мобильной выдаче ранжируются выше;
- В поисковой выдаче AMP страница находится в кэше поисковика, т.е её содержимое отдаётся мгновенно без обращения на сервер сайта.

Отличия AMP страниц от обычных:
- Отсутствие кастомных скриптов;
- Отсутствие обычных <img> тегов в документе;
- В коде страницы не должно быть inline-стилей;
- Структурированная схема данных;
- Ссылки canonical и обратная к ней;
- CSS не более 50 кб.

## От адаптивного сайта к AMP
Для создания AMP версии битриксового адаптивного сайта:
- Был скопирован шаблон сайта;
- Добавлены основные элементы AMP страниц: html amp, application/ld+json, canonical и др.;
- На событие OnEndBufferContent было повешено удаления битриксовых скриптов, т.к они запрещены в AMP;
- В 5 раз был уменьшен CSS файл для соответсвия требованиям: использованы более короткие имена классов, модификаторов, удалены стили не AMP страниц, уменьшено число шагов адативности у некоторых блоков
- Т.к в AMP нелья использовать inline стили, а сам файл стилей должен находиться в header, все ссылки изображений выводимые компонентами пришлось прокидывать в header с помощью отложенных функций ```ShowViewContent```, ```SetViewTarget```-```EndViewTarget```;
- На замену слайдерам, меню, картам, выпадающим спискам были найдены соответствующие AMP компоненты.

В результате был разработан AMP шаблон битриксового сайта с централизованым администрированием.

```
Минимальное время загрузки главной страницы обычного сайта (оптимизация PageSpeed 90/100) 2.3s, а AMP 0,86s
```

